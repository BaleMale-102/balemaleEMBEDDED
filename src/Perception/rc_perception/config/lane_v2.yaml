# rc_perception/config/lane_v2.yaml

lane_node:
  ros__parameters:
    # 토픽
    image_topic: /cam_bottom/image_raw
    output_topic: /perception/lane
    debug_topic: /perception/lane/debug
    
    # 디버그
    show_debug: false
    publish_debug_image: false
    
    # ROI (이미지 비율)
    roi_top_ratio: 0.3       # 상단 30% 제외
    roi_bottom_ratio: 1.0    # 하단까지
    
    # 라인 색상: 'black' or 'white'
    line_color: black
    
    # Adaptive threshold
    use_adaptive: true
    adaptive_block_size: 25  # 홀수
    adaptive_c: 10
    
    # 고정 threshold (use_adaptive=false 시)
    fixed_thresh_low: 0
    fixed_thresh_high: 60
    
    # Morphology
    morph_kernel_w: 5
    morph_kernel_h: 15
    morph_close_iter: 2
    morph_open_iter: 1
    
    # Sliding window
    sw_n_windows: 9
    sw_margin: 50
    sw_min_pixels: 30
    
    # Kalman filter
    kalman_q: 0.005    # process noise (작을수록 부드러움)
    kalman_r: 0.05     # measurement noise
    
    # 출력
    angle_max_deg: 45.0
    min_quality: 0.1
    frame_id: camera_bottom
    
    # 처리 속도
    process_rate_hz: 30.0
    log_throttle_sec: 2.0

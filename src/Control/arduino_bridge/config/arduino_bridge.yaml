# arduino_bridge/config/arduino_bridge.yaml

arduino_bridge_node:
  ros__parameters:
    # Serial 설정
    port: /dev/ttyUSB0
    baud: 115200
    timeout_sec: 0.1
    reconnect_sec: 2.0
    
    # 토픽
    drive_cmd_topic: /control/drive_cmd_safe
    cmd_vel_topic: /cmd_vel
    odom_topic: /odom/wheel
    status_topic: /arduino/status
    
    # 기능 토글
    use_cmd_vel: false
    use_real_velocity: true   # true: V 명령 (m/s), false: D 명령 (정규화)
    
    # 속도 제한 (D 명령 스케일링용)
    max_linear_vel: 0.3       # m/s
    max_angular_vel: 1.5      # rad/s
    
    # Odometry
    request_odom_hz: 20.0     # Arduino에 odom 요청 주기
    auto_odom: false          # true면 Arduino가 자동 발행
    
    # TF
    publish_tf: true
    odom_frame: odom
    base_frame: base_link
    
    # Handshake
    handshake_timeout_sec: 5.0
    max_pwm: 3000             # Arduino 초기 설정
    
    # 로깅
    log_throttle_sec: 2.0
